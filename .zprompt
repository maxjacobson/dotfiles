#!/usr/bin/env zsh

# mostly via http://stackoverflow.com/a/1128583
git_prompt() {
  if [[ -d .git ]]; then # we are in a git repo (-d checks existence of a directory)
    if [[ -e .git/rebase-apply ]]; then # we are mid-rebase (-e checks existence of a file)
      echo " (mid rebase)"
    else
      ref=$(git symbolic-ref HEAD | cut -d'/' -f3) && echo ":$ref"
    fi
  fi
}

setopt prompt_subst
PS1="%* %m %c\$(git_prompt)
* "

autoload -U promptinit
promptinit

