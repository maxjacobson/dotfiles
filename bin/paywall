#!/usr/bin/env fish

# Usage:
# $ paywall "https://cooking.nytimes.com/recipes/1893-everyday-pancakes"

if test (count $argv) -ne 1
    echo "Provide exactly one argument" >&2
    exit 1
end

set --local f (mktemp -t "document.XXXXXXXXXX.html")

if curl --silent --show-error --location "$argv[1]" --output "$f"
    open "$f"
else
    exit 1
end
