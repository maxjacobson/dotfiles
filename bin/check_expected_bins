#!/usr/bin/env ruby

def assert(bin_line)
  bin, * = bin_line.split(/\s+/)
  print "Checking #{bin}..."
  ENV["PATH"].split(":").any? do |path|
    if Dir.exist?(path)
      if Dir.entries(path).include?(bin)
        print "... found in #{path}\n"
        true
      end
    end
  end or raise "Not found: #{bin}"
end

file = File.expand_path "~/.expected_bins.txt"
File.read(file.chomp).each_line do |bin_line|
  next if bin_line =~ /^\s*#/ # skip comment lines
  next if bin_line =~ /^\s*$/ # skip blank lines

  assert bin_line
end
